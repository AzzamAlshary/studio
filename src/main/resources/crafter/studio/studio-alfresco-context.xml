<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- ////////////////////////////////////// -->
    <!--         repository layer               -->
    <!-- ////////////////////////////////////// -->
    <bean id="cstudioAlfrescoContentRepository" class="org.craftercms.studio.impl.v1.repository.alfresco.AlfrescoContentRepository" init-method="bootstrap">
        <property name="alfrescoUrl" value="${alfrescoUrl}" />
        <property name="adminUser" value="${repositoryJob.username}"/>
        <property name="adminPassword" value="${repositoryJob.password}"/>
        <property name="bootstrapEnabled" value="#{'${repositoryType}'.equals('alfresco') and '${crafter.repository.bootstrapEnabled}'}" />
    </bean>

    <bean id="cstudioAlfrescoContentRepositoryCACHED" class="org.craftercms.studio.impl.v1.repository.cached.CachedContentRepository">
        <property name="wrappedRepository" ref="cstudioAlfrescoContentRepository" />
    </bean>

    <bean id="cstudioAlfrescoContentRepositoryRegistration" 
          parent="cstudioContentRepositoryRegistration">
        <property name="contentRepository" ref="cstudioAlfrescoContentRepositoryCACHED"/>
        <property name="repositoryType" value="alfresco"/>
    </bean>

    <!-- ////////////////////////////////////// -->
    <!--         security layer               -->
    <!-- ////////////////////////////////////// -->
    <alias name="cstudioAlfrescoContentRepository" alias="cstudioAlfrescoSecurityProvider"/>

        <bean id="cstudioAlfrescoSecurityProviderRegistration" 
          parent="cstudioSecurityProviderRegistration">
        <property name="securityProvider" ref="cstudioAlfrescoSecurityProvider"/>
        <property name="providerType" value="alfresco"/>
    </bean>


</beans>